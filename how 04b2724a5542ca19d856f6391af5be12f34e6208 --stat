[33mcommit 04b2724a5542ca19d856f6391af5be12f34e6208[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m, [m[1;31morigin/HEAD[m[33m)[m
Author: thartline35 <tammyhartline@gmail.com>
Date:   Tue Sep 2 01:11:04 2025 -0500

    Updating api keys due to token queue limitation.

[1mdiff --git a/JSEARCH-API-USAGE.md b/JSEARCH-API-USAGE.md[m
[1mnew file mode 100644[m
[1mindex 0000000..f918c41[m
[1m--- /dev/null[m
[1m+++ b/JSEARCH-API-USAGE.md[m
[36m@@ -0,0 +1,97 @@[m
[32m+[m[32m# JSearch RapidAPI Integration Guide[m
[32m+[m
[32m+[m[32mThis guide explains how to use the JSearch API from RapidAPI in the AI Remote Job Finder project.[m
[32m+[m
[32m+[m[32m## Overview[m
[32m+[m
[32m+[m[32mThe JSearch API provides access to job listings from multiple sources. This integration includes:[m
[32m+[m
[32m+[m[32m1. A reusable module for making JSearch API calls (`api/jsearch-test.js`)[m
[32m+[m[32m2. Support for API key rotation when quota limits are reached[m
[32m+[m[32m3. A simple command-line test script (`test-jsearch.js`)[m
[32m+[m
[32m+[m[32m## Setup[m
[32m+[m
[32m+[m[32m### 1. Get RapidAPI Keys[m
[32m+[m
[32m+[m[32m1. Go to [RapidAPI](https://rapidapi.com/)[m
[32m+[m[32m2. Create an account and subscribe to the [JSearch API](https://rapidapi.com/letscrape-6bRBa3QguO5/api/jsearch)[m
[32m+[m[32m3. Get your API key from the RapidAPI dashboard[m
[32m+[m
[32m+[m[32m### 2. Configure API Keys[m
[32m+[m
[32m+[m[32mAdd your API keys to the `local.env` file:[m
[32m+[m
[32m+[m[32m```env[m
[32m+[m[32m# Primary API Key[m
[32m+[m[32mRAPIDAPI_KEY = "your_primary_api_key_here"[m
[32m+[m
[32m+[m[32m# Backup API Keys (optional but recommended)[m
[32m+[m[32mRAPIDAPI_KEY_BACKUP_1 = "your_backup_key_1_here"[m
[32m+[m[32mRAPIDAPI_KEY_BACKUP_2 = "your_backup_key_2_here"[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Important:** You must replace the placeholder values with actual API keys. The system will automatically rotate to backup keys when the primary key reaches its quota limit.[m
[32m+[m
[32m+[m[32mFor backup keys, you can create additional RapidAPI accounts to get separate API keys. Each account will have its own quota limit, allowing you to make more API calls.[m
[32m+[m
[32m+[m[32m## Usage[m
[32m+[m
[32m+[m[32m### Using the API Module[m
[32m+[m
[32m+[m[32mImport the `searchJobs` function in your code:[m
[32m+[m
[32m+[m[32m```javascript[m
[32m+[m[32mimport { searchJobs } from './api/jsearch-test.js';[m
[32m+[m
[32m+[m[32m// Basic usage[m
[32m+[m[32msearchJobs('javascript developer', 'remote')[m
[32m+[m[32m  .then(results => console.log(results))[m
[32m+[m[32m  .catch(error => console.error(error));[m
[32m+[m
[32m+[m[32m// Advanced usage with all parameters[m
[32m+[m[32msearchJobs([m
[32m+[m[32m  'javascript developer', // query[m
[32m+[m[32m  'remote',               // location[m
[32m+[m[32m  1,                      // page[m
[32m+[m[32m  1,                      // numPages[m
[32m+[m[32m  'us',                   // country[m
[32m+[m[32m  'all'                   // datePosted[m
[32m+[m[32m).then(results => console.log(results));[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Command-line Testing[m
[32m+[m
[32m+[m[32mUse the included test script to quickly test the API:[m
[32m+[m
[32m+[m[32m```bash[m
[32m+[m[32mnode test-jsearch.js "javascript developer" "remote" 1 1[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32mParameters:[m
[32m+[m[32m1. Search query (default: "javascript developer")[m
[32m+[m[32m2. Location (default: "remote")[m
[32m+[m[32m3. Page number (default: 1)[m
[32m+[m[32m4. Number of pages (default: 1)[m
[32m+[m
[32m+[m[32m## API Key Rotation[m
[32m+[m
[32m+[m[32mThe integration automatically handles API key rotation:[m
[32m+[m
[32m+[m[32m1. When an API call fails with a quota limit error (HTTP 429)[m
[32m+[m[32m2. The system tries the next available backup key[m
[32m+[m[32m3. If all keys are exhausted, an error is thrown[m
[32m+[m
[32m+[m[32mThis ensures maximum availability of the API service.[m
[32m+[m
[32m+[m[32m## Error Handling[m
[32m+[m
[32m+[m[32mThe module includes comprehensive error handling:[m
[32m+[m
[32m+[m[32m- Quota exhaustion detection and key rotation[m
[32m+[m[32m- Detailed error messages[m
[32m+[m[32m- Automatic retries with backup keys[m
[32m+[m
[32m+[m[32m## Integration with Main Application[m
[32m+[m
[32m+[m[32mThe JSearch API is already integrated with the main application through the API key rotation system in `search-jobs.js`. The test module demonstrates how to leverage this system for reliable API calls.[m
\ No newline at end of file[m
[1mdiff --git a/api/jsearch-test.js b/api/jsearch-test.js[m
[1mnew file mode 100644[m
[1mindex 0000000..5abe843[m
[1m--- /dev/null[m
[1m+++ b/api/jsearch-test.js[m
[36m@@ -0,0 +1,96 @@[m
[32m+[m[32m// JSearch RapidAPI Test Implementation[m
[32m+[m[32mimport axios from 'axios';[m
[32m+[m[32mimport dotenv from 'dotenv';[m
[32m+[m[32mimport path from 'path';[m
[32m+[m[32mimport { fileURLToPath } from 'url';[m
[32m+[m[32mimport { getApiKeyWithBackup, rotateToNextApiKey } from './search-jobs.js';[m
[32m+[m
[32m+[m[32m// Setup environment variables[m
[32m+[m[32mconst __filename = fileURLToPath(import.meta.url);[m
[32m+[m[32mconst __dirname = path.dirname(__filename);[m
[32m+[m[32mdotenv.config({ path: path.resolve(__dirname, '../local.env') });[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Makes a search request to JSearch API with automatic key rotation[m
[32m+[m[32m * @param {string} query - The job search query[m
[32m+[m[32m * @param {string} location - Location to search in[m
[32m+[m[32m * @param {number} page - Page number[m
[32m+[m[32m * @param {number} numPages - Number of pages to fetch[m
[32m+[m[32m * @param {string} country - Country code (e.g., 'us')[m
[32m+[m[32m * @param {string} datePosted - Filter by date posted (e.g., 'all', 'today', 'week')[m
[32m+[m[32m * @returns {Promise<Object>} - The API response[m
[32m+[m[32m */[m
[32m+[m[32masync function searchJobs(query, location = '', page = 1, numPages = 1, country = 'us', datePosted = 'all') {[m
[32m+[m[32m  // Format the search query[m
[32m+[m[32m  let formattedQuery = query;[m
[32m+[m[32m  if (location) {[m
[32m+[m[32m    formattedQuery += ` in ${location}`;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // Get API key with backup support[m
[32m+[m[32m  const keyInfo = getApiKeyWithBackup('RapidAPI');[m
[32m+[m[32m  if (!keyInfo || !keyInfo.key) {[m
[32m+[m[32m    throw new Error('No valid RapidAPI key available');[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  const options = {[m
[32m+[m[32m    method: 'GET',[m
[32m+[m[32m    url: 'https://jsearch.p.rapidapi.com/search',[m
[32m+[m[32m    params: {[m
[32m+[m[32m      query: formattedQuery,[m
[32m+[m[32m      page: page.toString(),[m
[32m+[m[32m      num_pages: numPages.toString(),[m
[32m+[m[32m      country: country,[m
[32m+[m[32m      date_posted: datePosted[m
[32m+[m[32m    },[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      'x-rapidapi-host': 'jsearch.p.rapidapi.com',[m
[32m+[m[32m      'x-rapidapi-key': keyInfo.key[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[41m  [m
[32m+[m[32m  try {[m
[32m+[m[32m    console.log(`Making JSearch API call for query: "${formattedQuery}"`);[m
[32m+[m[32m    const response = await axios.request(options);[m
[32m+[m[32m    console.log(`JSearch API call successful, found ${response.data.data?.length || 0} jobs`);[m
[32m+[m[32m    return response.data;[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error(`JSearch API call failed: ${error.message}`);[m
[32m+[m[41m    [m
[32m+[m[32m    // Check for quota exhaustion (HTTP 429)[m
[32m+[m[32m    if (erro